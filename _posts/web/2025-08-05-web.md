---
layout: post
title:  python网络爬虫实战-mongodb数据库操作
date:   2025-08-05 09:01:00 +0800
categories: 
    - review
    - python
    - web
image: 06.jpg
---

大家好，我是python网络爬虫这门课程的主要讲师geo

```bash
pip install pymongo
```

### 连接 MongoDB

```py
from pymongo import MongoClient

# 默认连接本地 MongoDB，端口 27017
client = MongoClient("mongodb://localhost:27017/")

# 选择数据库（如果没有会自动创建）
db = client["mydatabase"]

# 选择集合（相当于 SQL 的表）
collection = db["users"]
```

| MongoDB 概念 | 类似于 SQL 中        |
| ---------- | ---------------- |
| Database   | 数据库              |
| Collection | 表（table）         |
| Document   | 行（row） / JSON 结构 |
| Field      | 列（column）        |
---

### 插入数据（Create）

```python
user = {"name": "Alice", "age": 25}
collection.insert_one(user)  # 插入单笔

# 多笔插入
users = [{"name": "Bob", "age": 30}, {"name": "Charlie", "age": 35}]
collection.insert_many(users)
```

### 查询数据（Read）

#### 查找一笔

```python
user = collection.find_one({"name": "Alice"})
print(user)
```

#### 查找多笔

```python
for user in collection.find({"age": {"$gte": 30}}):
    print(user)
```

### 更新数据（Update）

#### 更新一笔

```python
collection.update_one(
    {"name": "Bob"},
    {"$set": {"age": 31}}  # 把 Bob 的年龄改为 31
)
```

#### 更新多笔

```python
collection.update_many(
    {"age": {"$gte": 30}},
    {"$inc": {"age": 1}}  # 年龄加 1 岁
)
```

### 删除数据（Delete）

#### 删除一笔

```python
collection.delete_one({"name": "Charlie"})
```

#### 删除多笔

```python
collection.delete_many({"age": {"$gte": 32}})
```

### 查看所有集合

```python
print(db.list_collection_names())
```

### 查看所有数据库

```python
print(client.list_database_names())
```

---

## 📂 第三步：断开连接（可选）

```python
client.close()
```