---
layout: post
title:  python ç±»ä¸å¯¹è±¡(OOP) è®¾è®¡è€…æ¨¡å¼
date:   2025-08-16 09:01:00 +0800
image: 04.jpg
tags: 
    - python
---

<!-- å­¦ä¹ è®¾è®¡è€…æ¨¡å¼? -->

<!-- ä½¿ç”¨è®¾è®¡è€…æ¨¡å¼å¼€å‘è½¯ä½“? -->

### å­¦ä¹ è®¾è®¡è€…æ¨¡å¼

| è®¾è®¡è€…æ¨¡å¼ |
--------------------------------------------- |
| å•ä¾‹æ¨¡å¼ï¼ˆSingletonï¼‰<br>å…¨å±€å”¯ä¸€å¯¹è±¡ï¼šé…ç½®ç®¡ç† / æ—¥å¿— / æ•°æ®åº“è¿æ¥ |
| å·¥å‚æ–¹æ³•æ¨¡å¼ï¼ˆFactory Methodï¼‰<br>æ ¹æ®å‚æ•°åˆ›å»ºä¸åŒå¯¹è±¡        |
| è£…é¥°å™¨æ¨¡å¼ï¼ˆDecoratorï¼‰<br>ç»™å¯¹è±¡åŠ¨æ€å¢åŠ åŠŸèƒ½ï¼ˆæƒé™ã€ç¼“å­˜ã€ä¸­é—´ä»¶ï¼‰    |
| å¤–è§‚æ¨¡å¼ï¼ˆFacadeï¼‰<br>å°è£…å¤šä¸ªå¤æ‚å­ç³»ç»Ÿï¼Œå¯¹å¤–æä¾›ç»Ÿä¸€æ¥å£          |
| ä»£ç†æ¨¡å¼ï¼ˆProxyï¼‰<br>æ§åˆ¶å¯¹çœŸå®å¯¹è±¡çš„è®¿é—®ï¼ˆå»¶è¿ŸåŠ è½½ã€è¿œç¨‹ä»£ç†ã€ç¼“å­˜ä»£ç†ï¼‰   |
| ç­–ç•¥æ¨¡å¼ï¼ˆStrategyï¼‰<br>å°†å¤šç§ç®—æ³•/ç­–ç•¥æŠ½è±¡å‡ºæ¥ï¼Œå¯åœ¨è¿è¡Œæ—¶è‡ªç”±åˆ‡æ¢    |
| è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆObserverï¼‰<br>å‘å¸ƒ/è®¢é˜…æœºåˆ¶ï¼Œå¤šä¸ªå¯¹è±¡è‡ªåŠ¨å“åº”äº‹ä»¶       |


#### å•ä¾‹æ¨¡å¼ï¼ˆSingletonï¼‰

æ•°æ®åº“è¿æ¥å•ä¸€è€Œä¸æ˜¯å»ºç«‹å¤šä¸ªè¿æ¥æ± é¿å…èµ„æºæµªè´¹ â†’ æ€§èƒ½ä¸‹é™ â†’ ç”šè‡³è¿æ¥å†²çª

#### å·¥å‚æ–¹æ³•æ¨¡å¼ï¼ˆFactory Methodï¼‰

æŠŠâ€œåˆ›å»ºå¯¹è±¡â€çš„é€»è¾‘æŠ½å‡ºæ¥ï¼Œæ”¾åˆ°ä¸€ä¸ªâ€œå·¥å‚ç±»â€é‡Œé¢å¤„ç†ã€‚

ä½¿ç”¨è€…ä¸éœ€è¦çŸ¥é“å…·ä½“åˆ›å»ºç»†èŠ‚ï¼Œåªéœ€è¦è°ƒç”¨å·¥å‚å°±èƒ½å¾—åˆ°å¯¹è±¡ã€‚

```py
# æŠ½è±¡äº§å“
class Animal:
    def speak(self):
        pass

# å…·ä½“äº§å“
class Dog(Animal):
    def speak(self):
        return "æ±ªæ±ª"

class Cat(Animal):
    def speak(self):
        return "å–µå–µ"

# æŠ½è±¡å·¥å‚
class AnimalFactory:
    def create_animal(self):
        raise NotImplementedError

# å…·ä½“å·¥å‚
class DogFactory(AnimalFactory):
    def create_animal(self):
        return Dog()

class CatFactory(AnimalFactory):
    def create_animal(self):
        return Cat()

# å®¢æˆ·ç«¯
factory = DogFactory()
animal = factory.create_animal()
print(animal.speak())   # æ±ªæ±ª
```

<!-- https://chatgpt.com/c/68a04d6c-bc38-8327-81bb-009fe43909c3 -->

### è£…é¥°å™¨æ¨¡å¼ï¼ˆDecoratorï¼‰

æ ¸å¿ƒæ€æƒ³ï¼ˆç™½è¯ç†è§£ï¼‰

åœ¨ä¸ä¿®æ”¹åŸæœ‰ç±»/å‡½æ•°çš„æƒ…å†µä¸‹ï¼ŒåŠ¨æ€åœ°æ·»åŠ é¢å¤–åŠŸèƒ½ã€‚

```py
# è£…é¥°å™¨ï¼ˆåŒ…è£…å‡½æ•°ï¼‰
def login_required(func):
    def wrapper(*args, **kwargs):
        print("-> æ£€æŸ¥ç”¨æˆ·æ˜¯å¦ç™»å½•")
        return func(*args, **kwargs)
    return wrapper


# åŸæœ¬çš„å‡½æ•°
@login_required
def download_file():
    print("æ­£åœ¨ä¸‹è½½æ–‡ä»¶...")


# è°ƒç”¨
download_file()
```

```bash
-> æ£€æŸ¥ç”¨æˆ·æ˜¯å¦ç™»å½•
æ­£åœ¨ä¸‹è½½æ–‡ä»¶...
```

### å¤–è§‚æ¨¡å¼ï¼ˆFacadeï¼‰

æŠŠå¤æ‚ç³»ç»ŸåŒ…è£…æˆä¸€ä¸ªâ€œç®€å•å…¥å£â€å¯¹å¤–æä¾›æœåŠ¡

```py
# å­ç³»ç»Ÿ1ï¼šæ‰“å¼€å¤–å–App
class AppOpener:
    def open_app(self):
        print("æ‰“å¼€ç¾é£Ÿå¤–å–App")

# å­ç³»ç»Ÿ2ï¼šé€‰æ‹©é¤å…å¹¶ä¸‹å•
class OrderPlacer:
    def place_order(self):
        print("é€‰æ‹©é¤å… -> ä¸‹å•")

# å­ç³»ç»Ÿ3ï¼šä»˜æ¬¾
class PaymentSystem:
    def pay(self):
        print("æ”¯ä»˜è®¢å•")

# å­ç³»ç»Ÿ4ï¼šç­‰å¾…é€è¾¾
class DeliveryTracker:
    def wait_for_delivery(self):
        print("ç­‰å¾…éª‘æ‰‹é€é¤...")

# å¤–è§‚ç±»ï¼ˆFacadeï¼‰â€”â€” å¤–å–åŠ©ç†
class FoodDeliveryFacade:
    def __init__(self):
        self.app = AppOpener()
        self.order = OrderPlacer()
        self.payment = PaymentSystem()
        self.tracker = DeliveryTracker()

    def order_food(self):
        # æŠŠå¤šä¸ªæ­¥éª¤ç»„åˆèµ·æ¥
        self.app.open_app()
        self.order.place_order()
        self.payment.pay()
        self.tracker.wait_for_delivery()
        print("âœ… æ™šé¤å·²é€è¾¾ï¼")

# å®¢æˆ·ç«¯
assistant = FoodDeliveryFacade()
assistant.order_food()
```

### ä»£ç†æ¨¡å¼ï¼ˆProxyï¼‰

ä¸ç›´æ¥è®¿é—®çœŸå®å¯¹è±¡ï¼Œè€Œæ˜¯é€šè¿‡ä¸€ä¸ªâ€œä»£ç†å¯¹è±¡â€æ¥é—´æ¥è®¿é—®å®ƒ

```py
# çœŸæ­£çš„å¯¹è±¡ â†’ æ˜æ˜Ÿ
class Star:
    def meet(self):
        print("ğŸ¤ æ˜æ˜Ÿï¼šå¾ˆé«˜å…´è§åˆ°ä½ ï½")

# ä»£ç†å¯¹è±¡ â†’ ç»çºªäºº
class Agent:
    def __init__(self):
        self.star = Star()        # ç»çºªäººæŒç®¡æ˜æ˜Ÿ

    def meet_star(self, fan_name):
        # åœ¨è”ç³»æ˜æ˜Ÿä¹‹å‰ï¼Œå…ˆåšä¸€äº›æ£€æŸ¥
        if fan_name == "é»„ç‰›":
            print("âŒ ç»çºªäººï¼šä½ æ˜¯é»„ç‰›ï¼Œä¸å®‰æ’è§é¢")
            return

        print("âœ… ç»çºªäººï¼šç²‰ä¸èº«ä»½ç¡®è®¤ï¼Œå®‰æ’è§é¢")
        # ç„¶åæ‰è®©æ˜æ˜ŸçœŸæ­£å‡ºé¢
        self.star.meet()


# å®¢æˆ·ç«¯
agent = Agent()

agent.meet_star("æ™®é€šç²‰ä¸")
# è¾“å‡ºï¼š
# âœ… ç»çºªäººï¼šç²‰ä¸èº«ä»½ç¡®è®¤ï¼Œå®‰æ’è§é¢
# ğŸ¤ æ˜æ˜Ÿï¼šå¾ˆé«˜å…´è§åˆ°ä½ ï½

agent.meet_star("é»„ç‰›")
# è¾“å‡ºï¼š
# âŒ ç»çºªäººï¼šä½ æ˜¯é»„ç‰›ï¼Œä¸å®‰æ’è§é¢
```

### ç­–ç•¥æ¨¡å¼ï¼ˆStrategyï¼‰

æŠŠå¤šä¸ªâ€œå¯äº’æ¢çš„ç®—æ³•/ç­–ç•¥â€ æŠ½è±¡å‡ºæ¥ï¼Œè¿è¡Œæ—¶æ ¹æ®éœ€è¦é€‰æ‹©å…¶ä¸­ä¸€ç§æ¥æ‰§è¡Œ

```py
# ä¸‰ç§ç­–ç•¥ï¼ˆä¸åŒçš„â€œå»å…¬å¸æ–¹å¼â€ï¼‰
class WalkStrategy:
    def go(self):
        print("èµ°è·¯å»å…¬å¸")

class SubwayStrategy:
    def go(self):
        print("ååœ°é“å»å…¬å¸")

class TaxiStrategy:
    def go(self):
        print("æ‰“è½¦å»å…¬å¸")


# ç¯å¢ƒç±»ï¼ˆä¸Šä¸‹æ–‡ï¼‰ï¼š
# è´Ÿè´£æ ¹æ®éœ€è¦é€‰æ‹©â€œç­–ç•¥â€å¹¶æ‰§è¡Œ
class GoToWorkContext:
    def __init__(self, strategy):
        self.strategy = strategy

    def execute(self):
        self.strategy.go()


# å®¢æˆ·ç«¯
# æƒ…å†µ1ï¼šå…¬å¸åœ¨é™„è¿‘
context = GoToWorkContext(WalkStrategy())
context.execute()

# æƒ…å†µ2ï¼šåœ°é“æ›´å¿«
context = GoToWorkContext(SubwayStrategy())
context.execute()
```

### è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆObserverï¼‰

ä¸€ä¸ªå¯¹è±¡å‘ç”Ÿå˜åŒ–æ—¶ï¼Œé€šçŸ¥æ‰€æœ‰è®¢é˜…å®ƒçš„å¯¹è±¡ï¼Œè®©å®ƒä»¬è‡ªåŠ¨åšå‡ºå“åº”ã€‚

ä¹Ÿå°±æ˜¯è¯´ï¼š
â€œå‘å¸ƒè€… â†’ é€šçŸ¥ â†’ å¤šä¸ªè®¢é˜…è€…â€

```py
# å‘å¸ƒè€…ï¼ˆSubjectï¼‰
class YouTubeChannel:
    def __init__(self):
        self.observers = []  # å­˜æ”¾æ‰€æœ‰è®¢é˜…è€…

    def subscribe(self, observer):
        self.observers.append(observer)

    def upload_video(self, title):
        print(f"é¢‘é“ä¸Šä¼ æ–°è§†é¢‘ï¼š{title}")
        # é€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…
        for ob in self.observers:
            ob.notify(title)


# è§‚å¯Ÿè€…ï¼ˆObserverï¼‰
class User:
    def __init__(self, name):
        self.name = name

    def notify(self, title):
        print(f"{self.name} æ”¶åˆ°é€šçŸ¥ï¼š{title}")


# å®¢æˆ·ç«¯
channel = YouTubeChannel()

user1 = User("å°æ˜")
user2 = User("å°çº¢")

channel.subscribe(user1)
channel.subscribe(user2)

channel.upload_video("å¦‚ä½•å†™ Python è®¾è®¡æ¨¡å¼")
```